---
layout: wide
title: DbFit Features
nav_bar_name: docs
show_comments: false
---
<div class="row">
  <div class="sidebar span3">
    <ul id="sidenav" class="nav nav-list affix">
      <li class="active"><a href="#writing-tests-in-excel">Writing tests in Excel</a></li>
      <li><a href="#database-password-encryption">Database password encryption</a></li>
    </ul>
  </div>
  <div class="span9">
    <div class="page-header">
      <h1>{{ page.title }}</h1>
    </div>
    <div markdown="1">
<span class="label label-info">Note</span>
This page is very much a work in progress at the moment, and more features will be appearing here shortly.

## Writing tests in Excel

Although FitNesse Wiki syntax is really simple, you do not have to use it to write scripts. You can write your tables in Excel (or almost any other spreadsheet program), and then just copy them into the FitNesse page editor. Clipboard automatically picks up data from most spreadsheet programs in tab-separated format, which can be directly converted to FitNesse with the `Spreadsheet to FitNesse` button that is available when editing a page. If your spreadsheet program behaves differently, it should be able to export tab-separated files.

You can also convert a FitNesse table to tab-separated data with the `FitNesse to Spreadsheet` button in page editor, and then copy that into Excel for editing.

<img class="img-polaroid" src="/dbfit/docs/screenshots/excel-editing.png">

## Database password encryption

DbFit has [several ways to connect to the database](/dbfit/docs/reference.html#connect), one of which is [storing the database password in a file](/dbfit/docs/reference.html#connect-using-file). If you are working in an environment where you aren't allowed to store database passwords in plaintext, you may wish to use the `cryptoapp` utility that ships with DbFit to obfuscate the password.

### How it works

You encrypt a password using `cryptoapp` and store the encrypted string in a database connection properties file. When a test is executed, DbFit decrypts the password and uses it to connect to the database. Both `cryptoapp` and DbFit use a cryptographic key, which is stored in a password-protected file known as *keystore*.

<div class="alert alert-warning alert-block">If an attacker is able to gain access to the <em>keystore</em>, they would be able to decrypt your passwords, since the <em>keystore</em> is protected by password that is hard-coded into the DbFit binary. Keep your <em>keystore</em> safe by setting restrictive permissions on the file.
</div>

### How to use it

In description below we'll be using `${CRYPTO_APP}` as alias for `cryptoapp.sh` or `cryptoapp.bat` (depending on the OS/shell). The relevant shell scripts are located in DbFit's distribution root folder.

#### Encrypting passwords

    ${CRYPTO_APP} -encryptPassword your-password-here [-keyStoreLocation <keyStoreLocation>]

Output:

    ...
    Encrypted Password:
    ENC(jzDH1fYetwCp3JFfAeKebA==)

#### Using encrypted password from DbFit

Just put the encrypted output generated by ***CryptoApp -encryptPassword*** inside the used database connection properties file:

    password=ENC(jzDH1fYetwCp3JFfAeKebA==)


No change is needed in DbFit tests -  same `ConnectUsingFile` fixture can be used like with non-encrypted passwords. DbFit will automatically detect the encrypted format and will decrypt the password accordingly.

#### Generating *KeyStore*

DbFit is using a Java *KeyStore* to get the key used for password decryption.
The **-encryptPassword** command automatically creates a *Key Store* if no one exists. A message is printed on the output in such case:

    KeyStore created: /home/vagrant/.dbfit.jks

* The `-encryptPassword` option will create a *KeyStore* if none exists yet.
* *keyStoreLocation* is optional directory path. If not specified - user home folder will be used by default.
* It's possible to create the KeyStore with other tools (e.g. java `keytool`). In order to keep it compatible with DbFit - same KeyStore format, key algorithm, alias and keystore password should be used.
* Keep your *KeyStore* file in a safe location. (DbFit account should be able to read it but normally permissions should be hardened to prevent access from any other unprivileged user).
* DbFit will be able to decrypt the password only if using the same *key*. If the *KeyStore* file is lost or destroyed - it would be impossible to decrypt the passwords generated with it.

#### Changing default *KeyStore* location

When running CryptoApp or DbFit server itsellf - it's possible to change the *Default KeyStore Location* by setting a *Java System Property* `dbfit.keystore.path` to point to the desired location.

</div>
  </div>
</div>
